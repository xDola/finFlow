<!DOCTYPE html><html lang="pt-BR"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>FinFlow Mobile</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"><link rel="manifest" href="data:application/manifest+json,{}"> <style> /* Reset e Variáveis */ :root { --primary: #8b5cf6; --primary-light: #a78bfa; --primary-dark: #7c3aed; --secondary: #06b6d4; --success: #10b981; --warning: #f59e0b; --danger: #ef4444; --info: #3b82f6; --bg-primary: #0f172a; --bg-secondary: #1e293b; --bg-card: rgba(30, 41, 59, 0.95); --bg-hover: rgba(30, 41, 59, 0.8); --border-color: rgba(148, 163, 184, 0.2); --text-primary: #f8fafc; --text-secondary: #cbd5e1; --text-muted: #94a3b8; --gradient-primary: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%); --gradient-secondary: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); --gradient-success: linear-gradient(135deg, #10b981 0%, #34d399 100%); --gradient-danger: linear-gradient(135deg, #ef4444 0%, #f87171 100%); --shadow: 0 4px 12px rgba(0, 0, 0, 0.3); --shadow-lg: 0 8px 25px rgba(0, 0, 0, 0.4); --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.2); --radius: 20px; --radius-sm: 12px; --radius-lg: 24px; --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); } * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; } html { height: 100%; overflow-x: hidden; } body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.5; min-height: 100vh; padding: 0; overflow-x: hidden; touch-action: manipulation; -webkit-font-smoothing: antialiased; background-image: radial-gradient(circle at 20% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 40%), radial-gradient(circle at 80% 20%, rgba(6, 182, 212, 0.15) 0%, transparent 40%); } /* Container Principal */ .container { max-width: 100%; margin: 0 auto; padding: 0; } /* Header Mobile */ .mobile-header { position: sticky; top: 0; z-index: 100; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px); border-bottom: 1px solid var(--border-color); padding: 16px 20px; display: flex; justify-content: space-between; align-items: center; } .header-left { display: flex; align-items: center; gap: 12px; } .logo-icon { width: 44px; height: 44px; background: var(--gradient-primary); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 20px; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4); } .app-title h1 { font-size: 22px; font-weight: 800; background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1.2; } .app-title p { font-size: 12px; color: var(--text-muted); font-weight: 400; } .header-actions { display: flex; gap: 10px; } /* Botões Mobile */ .btn { padding: 14px 20px; border: none; border-radius: var(--radius-sm); font-weight: 600; cursor: pointer; transition: var(--transition); display: inline-flex; align-items: center; justify-content: center; gap: 8px; font-size: 15px; min-height: 50px; min-width: 50px; user-select: none; } .btn-primary { background: var(--gradient-primary); color: white; box-shadow: var(--shadow); } .btn-primary:active { transform: scale(0.98); box-shadow: var(--shadow-lg); } .btn-secondary { background: rgba(30, 41, 59, 0.8); color: var(--text-primary); border: 1px solid var(--border-color); } .btn-secondary:active { background: var(--bg-hover); transform: scale(0.98); } .btn-icon { width: 50px; height: 50px; padding: 0; border-radius: 14px; font-size: 20px; } .btn-sm { padding: 10px 16px; font-size: 14px; min-height: 44px; min-width: 44px; } /* Bottom Navigation */ .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px); border-top: 1px solid var(--border-color); display: flex; justify-content: space-around; padding: 12px 0; z-index: 100; } .nav-item { display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 8px 12px; color: var(--text-muted); text-decoration: none; font-size: 12px; font-weight: 500; transition: var(--transition); border-radius: var(--radius-sm); min-width: 70px; } .nav-item i { font-size: 20px; } .nav-item.active { color: var(--primary); background: rgba(139, 92, 246, 0.1); } .nav-item:active { transform: scale(0.95); } /* Conteúdo Principal */ .main-content { padding: 20px; padding-bottom: 80px; /* Espaço para o bottom-nav */ max-width: 100%; overflow-x: hidden; } /* Dashboard Cards */ .dashboard-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 24px; } .card { background: var(--bg-card); backdrop-filter: blur(10px); border-radius: var(--radius); padding: 20px; border: 1px solid var(--border-color); box-shadow: var(--shadow-card); transition: var(--transition); position: relative; overflow: hidden; } .card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: var(--gradient-primary); } .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .card-title { font-size: 16px; font-weight: 700; color: var(--text-primary); display: flex; align-items: center; gap: 8px; } .card-icon { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px; background: rgba(30, 41, 59, 0.8); border: 1px solid var(--border-color); } .income-icon { color: var(--success); } .expense-icon { color: var(--danger); } .balance-icon { color: var(--primary); } .investment-icon { color: var(--secondary); } .card-value { font-size: 28px; font-weight: 900; margin-bottom: 8px; background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1.2; } .positive { color: var(--success); } .negative { color: var(--danger); } .card-trend { display: flex; align-items: center; gap: 6px; font-size: 13px; color: var(--text-muted); } /* Quick Actions */ .quick-actions { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 24px; } .quick-action { display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 16px 8px; background: var(--bg-card); border-radius: var(--radius); border: 1px solid var(--border-color); text-decoration: none; color: var(--text-primary); transition: var(--transition); } .quick-action:active { transform: scale(0.95); background: var(--bg-hover); } .quick-action i { font-size: 24px; color: var(--primary); } .quick-action span { font-size: 12px; font-weight: 600; text-align: center; } /* Charts Mobile */ .chart-section { margin-bottom: 24px; } .chart-card { background: var(--bg-card); backdrop-filter: blur(10px); border-radius: var(--radius); padding: 20px; border: 1px solid var(--border-color); box-shadow: var(--shadow-card); margin-bottom: 16px; } .chart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; } .chart-title { font-size: 18px; font-weight: 700; color: var(--text-primary); display: flex; align-items: center; gap: 10px; } .chart-container { height: 250px; position: relative; } /* Lists Mobile */ .list-section { margin-bottom: 24px; } .list-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding: 0 4px; } .list-title { font-size: 18px; font-weight: 700; color: var(--text-primary); display: flex; align-items: center; gap: 8px; } .see-all { font-size: 14px; color: var(--primary); text-decoration: none; font-weight: 600; } .list-item { background: var(--bg-card); backdrop-filter: blur(10px); border-radius: var(--radius-sm); padding: 16px; margin-bottom: 12px; border: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; transition: var(--transition); } .list-item:active { transform: scale(0.99); background: var(--bg-hover); } .item-info h4 { font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: 4px; } .item-info p { font-size: 14px; color: var(--text-muted); } .item-value { font-size: 18px; font-weight: 700; } /* Tabs Mobile */ .mobile-tabs { display: flex; overflow-x: auto; gap: 4px; margin-bottom: 20px; padding: 4px; scrollbar-width: none; -ms-overflow-style: none; } .mobile-tabs::-webkit-scrollbar { display: none; } .mobile-tab { padding: 12px 20px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius-sm); color: var(--text-muted); font-weight: 600; font-size: 14px; white-space: nowrap; cursor: pointer; transition: var(--transition); flex-shrink: 0; } .mobile-tab.active { background: var(--gradient-primary); color: white; border-color: var(--primary); } .mobile-tab:active { transform: scale(0.95); } /* Tables Mobile */ .table-mobile { background: var(--bg-card); border-radius: var(--radius); border: 1px solid var(--border-color); overflow: hidden; } .table-row { display: flex; justify-content: space-between; align-items: center; padding: 16px; border-bottom: 1px solid var(--border-color); } .table-row:last-child { border-bottom: none; } .table-cell { flex: 1; padding: 4px 8px; } .table-cell:first-child { flex: 2; } /* Badges Mobile */ .badge { padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 700; display: inline-flex; align-items: center; gap: 4px; } .badge-success { background: rgba(16, 185, 129, 0.2); color: var(--success); border: 1px solid rgba(16, 185, 129, 0.3); } .badge-danger { background: rgba(239, 68, 68, 0.2); color: var(--danger); border: 1px solid rgba(239, 68, 68, 0.3); } .badge-info { background: rgba(6, 182, 212, 0.2); color: var(--secondary); border: 1px solid rgba(6, 182, 212, 0.3); } /* Action Buttons Mobile */ .action-buttons { display: flex; gap: 8px; } .action-btn { width: 44px; height: 44px; border-radius: 12px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: var(--transition); border: 1px solid var(--border-color); background: rgba(30, 41, 59, 0.8); color: var(--text-secondary); font-size: 18px; } .action-btn:active { transform: scale(0.95); } .action-btn.delete:active { background: rgba(239, 68, 68, 0.2); color: var(--danger); } .action-btn.edit:active { background: rgba(59, 130, 246, 0.2); color: var(--info); } .action-btn.chart:active { background: rgba(139, 92, 246, 0.2); color: var(--primary); } /* Modais Mobile */ .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(10px); z-index: 1000; display: flex; align-items: flex-end; padding: 0; } .modal-content { background: var(--bg-card); width: 100%; max-height: 90vh; border-radius: var(--radius-lg) var(--radius-lg) 0 0; padding: 0; position: relative; overflow: hidden; animation: slideUp 0.3s ease; } @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } } .modal-header { padding: 24px 20px 16px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; } .modal-title { font-size: 22px; font-weight: 800; color: var(--text-primary); display: flex; align-items: center; gap: 10px; } .modal-close { width: 44px; height: 44px; border-radius: 12px; display: flex; align-items: center; justify-content: center; background: rgba(30, 41, 59, 0.8); border: 1px solid var(--border-color); color: var(--text-muted); font-size: 24px; cursor: pointer; } .modal-close:active { transform: scale(0.95); } .modal-body { padding: 20px; max-height: calc(90vh - 100px); overflow-y: auto; } /* Formulários Mobile */ .form-group { margin-bottom: 20px; } .form-label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-primary); font-size: 15px; } .form-control { width: 100%; padding: 16px; background: rgba(30, 41, 59, 0.8); border: 2px solid var(--border-color); border-radius: var(--radius-sm); font-size: 16px; transition: var(--transition); color: var(--text-primary); } .form-control:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1); } .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; } /* Switches Mobile */ .switch { position: relative; display: inline-block; width: 60px; height: 34px; } .switch input { opacity: 0; width: 0; height: 0; } .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #475569; transition: .4s; border-radius: 34px; } .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; } input:checked + .slider { background-color: var(--primary); } input:checked + .slider:before { transform: translateX(26px); } /* Empty States */ .empty-state { text-align: center; padding: 60px 20px; } .empty-state i { font-size: 64px; color: var(--text-muted); margin-bottom: 20px; opacity: 0.5; } .empty-state h3 { color: var(--text-primary); margin-bottom: 10px; font-size: 20px; } .empty-state p { color: var(--text-muted); margin-bottom: 20px; font-size: 16px; } /* Notificações Mobile */ .notification { position: fixed; top: 20px; left: 20px; right: 20px; background: var(--bg-card); backdrop-filter: blur(20px); padding: 16px 20px; border-radius: var(--radius); border-left: 4px solid var(--success); box-shadow: var(--shadow-lg); display: flex; align-items: center; gap: 12px; z-index: 1001; transform: translateY(-100px); transition: transform 0.3s ease; } .notification.show { transform: translateY(0); } .notification-error { border-left-color: var(--danger); } /* Loading States */ .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid var(--border-color); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; } @keyframes spin { to { transform: rotate(360deg); } } /* Responsive Adjustments */ @media (max-width: 360px) { .dashboard-grid { grid-template-columns: 1fr; } .quick-actions { grid-template-columns: repeat(2, 1fr); } .form-row { grid-template-columns: 1fr; } } /* PWA Styles */ @media (display-mode: standalone) { .mobile-header { padding-top: max(16px, env(safe-area-inset-top)); } .bottom-nav { padding-bottom: max(12px, env(safe-area-inset-bottom)); } } /* Hide scrollbars but keep functionality */ .scrollable { -webkit-overflow-scrolling: touch; scrollbar-width: none; } .scrollable::-webkit-scrollbar { display: none; } /* Touch Feedback */ .touch-feedback:active { opacity: 0.7; transform: scale(0.98); } </style> <link rel="manifest" href="manifest.json"><meta name="theme-color" content="#8b5cf6"><link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png"><link rel="apple-touch-icon" sizes="512x512" href="icons/icon-512.png">
<script>
if('serviceWorker' in navigator){window.addEventListener('load',()=>navigator.serviceWorker.register('service-worker.js').catch(()=>{}));}
</script> <style>
/* UI refinements injected */
.card { transition: transform .18s ease, box-shadow .18s ease; }
.card:hover{ transform: translateY(-6px); box-shadow: 0 14px 30px rgba(2,6,23,0.5); }
.quick-action i{ font-size:26px; }
.modal-content{ padding-bottom:18px; }
.form-control{ color:var(--text-primary); }
</style> </head><body><header class="mobile-header"><div class="header-left"><div class="logo-icon"><i class="fas fa-coins"></i></div><div class="app-title"><h1>FinFlow</h1><p>Controle Financeiro</p></div></div><div class="header-actions"><button class="btn btn-icon btn-secondary" id="menuBtn"><i class="fas fa-bars"></i></button></div></header><main class="main-content" id="mainContent"><section class="dashboard-section" id="dashboardSection"><div class="dashboard-grid"><div class="card"><div class="card-header"><div class="card-title"><div class="card-icon balance-icon"><i class="fas fa-wallet"></i></div> Saldo </div></div><div class="card-value" id="totalBalance">R$ 25.847,90</div><div class="card-trend"><i class="fas fa-arrow-up positive"></i><span class="positive">+12,5%</span></div></div><div class="card"><div class="card-header"><div class="card-title"><div class="card-icon income-icon"><i class="fas fa-arrow-up"></i></div> Receitas </div></div><div class="card-value positive" id="monthlyIncome">R$ 15.250,00</div><div class="card-trend"><i class="fas fa-arrow-up positive"></i><span class="positive">+8,2%</span></div></div><div class="card"><div class="card-header"><div class="card-title"><div class="card-icon expense-icon"><i class="fas fa-arrow-down"></i></div> Despesas </div></div><div class="card-value negative" id="monthlyExpenses">R$ 8.902,10</div><div class="card-trend"><i class="fas fa-arrow-down negative"></i><span class="negative">-5,3%</span></div></div><div class="card"><div class="card-header"><div class="card-title"><div class="card-icon investment-icon"><i class="fas fa-chart-pie"></i></div> Investimentos </div></div><div class="card-value" id="totalInvested">R$ 85.400,00</div><div class="card-trend"><i class="fas fa-arrow-up positive"></i><span class="positive">+18,7%</span></div></div></div><div class="quick-actions"><button class="quick-action touch-feedback" id="addIncomeBtn"><i class="fas fa-plus-circle"></i><span>Receita</span></button><button class="quick-action touch-feedback" id="addExpenseBtn"><i class="fas fa-minus-circle"></i><span>Despesa</span></button><button class="quick-action touch-feedback" id="addInvestmentBtn"><i class="fas fa-chart-line"></i><span>Investir</span></button><button class="quick-action touch-feedback" id="addDividendBtn"><i class="fas fa-donate"></i><span>Dividendo</span></button></div><div class="list-section"><div class="list-header"><h3 class="list-title"><i class="fas fa-history"></i> Transações Recentes </h3><a href="#" class="see-all" id="seeAllTransactions">Ver todas</a></div><div id="recentTransactions"></div></div><div class="list-section"><div class="list-header"><h3 class="list-title"><i class="fas fa-chart-line"></i> Meus Investimentos </h3><a href="#" class="see-all" id="seeAllInvestments">Ver todos</a></div><div id="investmentsList"></div></div></section><section class="transactions-section" id="transactionsSection" style="display: none;"><div class="list-header"><h3 class="list-title"><i class="fas fa-exchange-alt"></i> Todas as Transações </h3><button class="btn btn-primary btn-sm" id="addTransactionBtn"><i class="fas fa-plus"></i> Nova </button></div><div class="table-mobile"><div id="allTransactionsList"></div></div></section><section class="investments-section" id="investmentsSection" style="display: none;"><div class="list-header"><h3 class="list-title"><i class="fas fa-chart-pie"></i> Carteira de Investimentos </h3><button class="btn btn-primary btn-sm" id="addNewInvestmentBtn"><i class="fas fa-plus"></i> Novo </button></div><div class="table-mobile"><div id="allInvestmentsList"></div></div></section><section class="dividends-section" id="dividendsSection" style="display: none;"><div class="list-header"><h3 class="list-title"><i class="fas fa-donate"></i> Histórico de Dividendos </h3><button class="btn btn-primary btn-sm" id="addNewDividendBtn"><i class="fas fa-plus"></i> Novo </button></div><div class="chart-card"><div class="chart-container"><canvas id="mobileDividendsChart"></canvas></div></div><div class="table-mobile"><div id="dividendsHistory"></div></div></section><section class="reports-section" id="reportsSection" style="display: none;"><div class="chart-section"><div class="chart-card"><div class="chart-header"><h3 class="chart-title"><i class="fas fa-chart-line"></i> Evolução do Patrimônio </h3></div><div class="chart-container"><canvas id="mobileWealthChart"></canvas></div></div><div class="chart-card"><div class="chart-header"><h3 class="chart-title"><i class="fas fa-pie-chart"></i> Distribuição por Categoria </h3></div><div class="chart-container"><canvas id="mobileCategoriesChart"></canvas></div></div></div></section></main><nav class="bottom-nav"><a href="#" class="nav-item active" data-page="dashboard"><i class="fas fa-home"></i><span>Início</span></a><a href="#" class="nav-item" data-page="transactions"><i class="fas fa-exchange-alt"></i><span>Transações</span></a><a href="#" class="nav-item" data-page="investments"><i class="fas fa-chart-line"></i><span>Investimentos</span></a><a href="#" class="nav-item" data-page="dividends"><i class="fas fa-donate"></i><span>Dividendos</span></a><a href="#" class="nav-item" data-page="reports"><i class="fas fa-chart-bar"></i><span>Relatórios</span></a></nav><div class="modal-overlay" id="transactionModal" style="display: none;"><div class="modal-content"><div class="modal-header"><h3 class="modal-title"><i class="fas fa-plus-circle"></i> Nova Transação </h3><button class="modal-close" id="closeTransactionModal">&times;</button></div><div class="modal-body"><form id="transactionForm"><div class="form-group"><label class="form-label">Descrição</label><input type="text" class="form-control" id="transactionDescription" required placeholder="Ex: Salário, Supermercado..."></div><div class="form-row"><div class="form-group"><label class="form-label">Valor (R$)</label><input type="number" class="form-control" id="transactionAmount" step="0.01" required></div><div class="form-group"><label class="form-label">Data</label><input type="date" class="form-control" id="transactionDate" required></div></div><div class="form-row"><div class="form-group"><label class="form-label">Tipo</label><select class="form-control" id="transactionType" required><option value="income">Receita</option><option value="expense">Despesa</option><option value="investment">Investimento</option></select></div><div class="form-group"><label class="form-label">Categoria</label><select class="form-control" id="transactionCategory" required><option value="salary">Salário</option><option value="freelance">Freelance</option><option value="food">Alimentação</option><option value="transport">Transporte</option><option value="housing">Moradia</option><option value="entertainment">Lazer</option><option value="health">Saúde</option><option value="education">Educação</option><option value="other">Outros</option></select></div></div><button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;"><i class="fas fa-save"></i> Salvar Transação </button></form></div></div></div><div class="modal-overlay" id="investmentModal" style="display: none;"><div class="modal-content"><div class="modal-header"><h3 class="modal-title"><i class="fas fa-chart-line"></i> Novo Investimento </h3><button class="modal-close" id="closeInvestmentModal">&times;</button></div><div class="modal-body"><form id="investmentForm"><div class="form-group"><label class="form-label">Nome do Ativo</label><input type="text" class="form-control" id="investmentName" required placeholder="Ex: PETR4, BTC..."></div><div class="form-row"><div class="form-group"><label class="form-label">Tipo</label><select class="form-control" id="investmentType" required><option value="stock">Ação</option><option value="fii">FII</option><option value="bond">Renda Fixa</option><option value="crypto">Criptomoeda</option></select></div><div class="form-group"><label class="form-label">Data</label><input type="date" class="form-control" id="investmentDate" required></div></div><div class="form-row"><div class="form-group"><label class="form-label">Valor Investido (R$)</label><input type="number" class="form-control" id="investmentAmount" step="0.01" required></div><div class="form-group"><label class="form-label">Quantidade</label><input type="number" class="form-control" id="investmentQuantity" step="0.01" required></div></div><button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;"><i class="fas fa-chart-line"></i> Adicionar Investimento </button></form></div></div></div><div class="modal-overlay" id="dividendModal" style="display: none;"><div class="modal-content"><div class="modal-header"><h3 class="modal-title"><i class="fas fa-donate"></i> Registrar Dividendo </h3><button class="modal-close" id="closeDividendModal">&times;</button></div><div class="modal-body"><form id="dividendForm"><div class="form-group"><label class="form-label">Ativo</label><select class="form-control" id="dividendAsset" required><option value="">Selecione um ativo</option></select></div><div class="form-row"><div class="form-group"><label class="form-label">Valor (R$)</label><input type="number" class="form-control" id="dividendAmount" step="0.01" required></div><div class="form-group"><label class="form-label">Data</label><input type="date" class="form-control" id="dividendDate" required></div></div><button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 20px;"><i class="fas fa-donate"></i> Registrar Dividendo </button></form></div></div></div><div class="modal-overlay" id="deleteConfirmModal" style="display: none;"><div class="modal-content"><div class="modal-header"><h3 class="modal-title" style="color: var(--danger);"><i class="fas fa-exclamation-triangle"></i> Confirmar Exclusão </h3><button class="modal-close" id="closeDeleteModal">&times;</button></div><div class="modal-body"><div style="text-align: center; padding: 20px 0;"><div style=" width: 80px; height: 80px; background: rgba(239, 68, 68, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 36px; color: var(--danger); "><i class="fas fa-trash"></i></div><h4 style="color: var(--text-primary); margin-bottom: 10px; font-size: 18px;" id="deleteItemName"></h4><p style="color: var(--text-muted); margin-bottom: 20px;" id="deleteItemDetails"></p><div style=" background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: var(--radius-sm); margin-bottom: 30px; border-left: 4px solid var(--danger); "><p style="color: #fca5a5; margin: 0; font-size: 14px; display: flex; align-items: center; gap: 8px;"><i class="fas fa-exclamation-circle"></i> Esta ação não pode ser desfeita </p></div></div><div style="display: flex; gap: 12px;"><button class="btn btn-secondary" id="cancelDelete" style="flex: 1;"> Cancelar </button><button class="btn" id="confirmDelete" style="flex: 1; background: var(--gradient-danger); color: white;"> Excluir </button></div></div></div></div><div class="notification" id="notification"><i class="fas fa-check-circle"></i><span id="notificationMessage">Operação realizada com sucesso!</span></div> <script src="chart.js"></script> <script> // Dados da aplicação let transactions = JSON.parse(localStorage.getItem('finflow_mobile_transactions')) || []; let investments = JSON.parse(localStorage.getItem('finflow_mobile_investments')) || []; let dividends = JSON.parse(localStorage.getItem('finflow_mobile_dividends')) || []; // Estado atual let currentPage = 'dashboard'; let currentCharts = {}; // Inicialização document.addEventListener('DOMContentLoaded', function() { initApp(); loadSampleData(); updateDashboard(); loadRecentTransactions(); loadInvestmentsList(); initMobileCharts(); }); function initApp() { // Bottom Navigation document.querySelectorAll('.nav-item').forEach(item => { item.addEventListener('click', function(e) { e.preventDefault(); const page = this.dataset.page; // Atualiza navegação document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active')); this.classList.add('active'); // Esconde todas as seções document.querySelectorAll('main > section').forEach(section => { section.style.display = 'none'; }); // Mostra seção selecionada document.getElementById(page + 'Section').style.display = 'block'; currentPage = page; // Carrega dados específicos da página switch(page) { case 'transactions': loadAllTransactions(); break; case 'investments': loadAllInvestments(); break; case 'dividends': loadDividendsHistory(); updateDividendsChart(); break; case 'reports': updateReportsCharts(); break; } }); }); // Botões de ação rápida document.getElementById('addIncomeBtn').addEventListener('click', () => { showModal('transactionModal'); document.getElementById('transactionType').value = 'income'; document.getElementById('transactionDate').valueAsDate = new Date(); }); document.getElementById('addExpenseBtn').addEventListener('click', () => { showModal('transactionModal'); document.getElementById('transactionType').value = 'expense'; document.getElementById('transactionDate').valueAsDate = new Date(); }); document.getElementById('addInvestmentBtn').addEventListener('click', () => { showModal('investmentModal'); document.getElementById('investmentDate').valueAsDate = new Date(); }); document.getElementById('addDividendBtn').addEventListener('click', () => { showModal('dividendModal'); populateDividendAssets(); document.getElementById('dividendDate').valueAsDate = new Date(); }); // Botões de páginas document.getElementById('addTransactionBtn')?.addEventListener('click', () => { showModal('transactionModal'); document.getElementById('transactionDate').valueAsDate = new Date(); }); document.getElementById('addNewInvestmentBtn')?.addEventListener('click', () => { showModal('investmentModal'); document.getElementById('investmentDate').valueAsDate = new Date(); }); document.getElementById('addNewDividendBtn')?.addEventListener('click', () => { showModal('dividendModal'); populateDividendAssets(); document.getElementById('dividendDate').valueAsDate = new Date(); }); // Links "Ver todos" document.getElementById('seeAllTransactions')?.addEventListener('click', (e) => { e.preventDefault(); document.querySelector('.nav-item[data-page="transactions"]').click(); }); document.getElementById('seeAllInvestments')?.addEventListener('click', (e) => { e.preventDefault(); document.querySelector('.nav-item[data-page="investments"]').click(); }); // Fechar modais document.querySelectorAll('.modal-close').forEach(btn => { btn.addEventListener('click', function() { const modal = this.closest('.modal-overlay'); modal.style.display = 'none'; }); }); document.querySelectorAll('.modal-overlay').forEach(modal => { modal.addEventListener('click', function(e) { if (e.target === this) { this.style.display = 'none'; } }); }); // Formulários document.getElementById('transactionForm').addEventListener('submit', handleTransactionSubmit); document.getElementById('investmentForm').addEventListener('submit', handleInvestmentSubmit); document.getElementById('dividendForm').addEventListener('submit', handleDividendSubmit); // Confirmação de exclusão document.getElementById('cancelDelete').addEventListener('click', () => { hideModal('deleteConfirmModal'); }); // Menu button document.getElementById('menuBtn').addEventListener('click', showMenu); } function loadSampleData() { if (transactions.length === 0) { transactions = [ { id: 1, date: '2023-10-05', description: 'Salário', category: 'salary', type: 'income', amount: 8500.00 }, { id: 2, date: '2023-10-10', description: 'Aluguel', category: 'housing', type: 'expense', amount: 2200.00 }, { id: 3, date: '2023-10-12', description: 'Supermercado', category: 'food', type: 'expense', amount: 580.00 }, { id: 4, date: '2023-10-15', description: 'Freelance', category: 'freelance', type: 'income', amount: 2500.00 }, { id: 5, date: '2023-10-18', description: 'Investimento - PETR4', category: 'investment', type: 'investment', amount: 2000.00 }, { id: 6, date: '2023-10-22', description: 'Academia', category: 'health', type: 'expense', amount: 120.00 } ]; } if (investments.length === 0) { investments = [ { id: 1, name: 'PETR4', type: 'stock', date: '2023-08-15', amount: 15000.00, quantity: 500, currentValue: 16500.00, yield: 6.5 }, { id: 2, name: 'BCFF11', type: 'fii', date: '2023-09-10', amount: 8000.00, quantity: 100, currentValue: 8500.00, yield: 8.2 }, { id: 3, name: 'BTC', type: 'crypto', date: '2023-06-05', amount: 5000.00, quantity: 0.15, currentValue: 6500.00, yield: 0 } ]; } if (dividends.length === 0) { dividends = [ { id: 1, assetId: 1, assetName: 'PETR4', amount: 325.50, date: '2023-10-05', type: 'dividend' }, { id: 2, assetId: 2, assetName: 'BCFF11', amount: 164.80, date: '2023-10-10', type: 'rental' } ]; } saveData(); } function initMobileCharts() { // Dividends Chart const dividendsCtx = document.getElementById('mobileDividendsChart').getContext('2d'); currentCharts.dividends = new Chart(dividendsCtx, { type: 'bar', data: { labels: ['Set', 'Out'], datasets: [{ label: 'Dividendos', data: [480, 490], backgroundColor: '#06b6d4', borderRadius: 8 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, grid: { color: 'rgba(148, 163, 184, 0.1)' }, ticks: { color: '#94a3b8', callback: function(value) { return 'R$ ' + value; } } }, x: { grid: { display: false }, ticks: { color: '#94a3b8' } } } } }); // Wealth Chart const wealthCtx = document.getElementById('mobileWealthChart').getContext('2d'); currentCharts.wealth = new Chart(wealthCtx, { type: 'line', data: { labels: ['Jul', 'Ago', 'Set', 'Out'], datasets: [{ label: 'Patrimônio', data: [72000, 75000, 78000, 85400], borderColor: '#8b5cf6', backgroundColor: 'rgba(139, 92, 246, 0.1)', borderWidth: 3, tension: 0.4, fill: true }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: false, grid: { color: 'rgba(148, 163, 184, 0.1)' }, ticks: { color: '#94a3b8', callback: function(value) { return 'R$ ' + (value / 1000).toFixed(0) + 'k'; } } }, x: { grid: { display: false }, ticks: { color: '#94a3b8' } } } } }); // Categories Chart const categoriesCtx = document.getElementById('mobileCategoriesChart').getContext('2d'); currentCharts.categories = new Chart(categoriesCtx, { type: 'doughnut', data: { labels: ['Moradia', 'Alimentação', 'Transporte', 'Lazer', 'Saúde'], datasets: [{ data: [2200, 580, 280, 65, 120], backgroundColor: [ '#8b5cf6', '#06b6d4', '#10b981', '#f59e0b', '#3b82f6' ], borderWidth: 2, borderColor: 'rgba(30, 41, 59, 0.8)' }] }, options: { responsive: true, maintainAspectRatio: false, cutout: '60%', plugins: { legend: { position: 'bottom', labels: { color: '#cbd5e1', padding: 15, usePointStyle: true } } } } }); } function updateDashboard() { const currentMonth = new Date().getMonth(); const currentYear = new Date().getFullYear(); const monthTransactions = transactions.filter(t => { const date = new Date(t.date); return date.getMonth() === currentMonth && date.getFullYear() === currentYear; }); const totalIncome = monthTransactions .filter(t => t.type === 'income') .reduce((sum, t) => sum + t.amount, 0); const totalExpenses = monthTransactions .filter(t => t.type === 'expense') .reduce((sum, t) => sum + t.amount, 0); const totalInvestmentsValue = investments.reduce((sum, i) => sum + i.currentValue, 0); const totalBalance = totalIncome - totalExpenses + totalInvestmentsValue; // Atualizar valores document.getElementById('totalBalance').textContent = formatCurrency(totalBalance); document.getElementById('monthlyIncome').textContent = formatCurrency(totalIncome); document.getElementById('monthlyExpenses').textContent = formatCurrency(totalExpenses); document.getElementById('totalInvested').textContent = formatCurrency(totalInvestmentsValue); } function loadRecentTransactions() { const container = document.getElementById('recentTransactions'); const recent = [...transactions] .sort((a, b) => new Date(b.date) - new Date(a.date)) .slice(0, 3); container.innerHTML = ''; if (recent.length === 0) { container.innerHTML = ` <div class="empty-state"> <i class="fas fa-exchange-alt"></i> <p>Nenhuma transação recente</p> </div> `; return; } recent.forEach(transaction => { const item = document.createElement('div'); item.className = 'list-item touch-feedback'; item.dataset.id = transaction.id; const amount = formatCurrency(transaction.amount); const date = new Date(transaction.date).toLocaleDateString('pt-BR'); const typeIcon = transaction.type === 'income' ? 'fa-arrow-up' : 'fa-arrow-down'; const typeClass = transaction.type === 'income' ? 'positive' : 'negative'; item.innerHTML = ` <div class="item-info"> <h4>${transaction.description}</h4> <p>${date} • ${getCategoryName(transaction.category)}</p> </div> <div class="item-value ${typeClass}"> <i class="fas ${typeIcon}"></i> ${amount} </div> `; item.addEventListener('click', () => { showTransactionDetails(transaction.id); }); container.appendChild(item); }); } function loadInvestmentsList() { const container = document.getElementById('investmentsList'); const topInvestments = [...investments] .sort((a, b) => b.currentValue - a.currentValue) .slice(0, 3); container.innerHTML = ''; if (topInvestments.length === 0) { container.innerHTML = ` <div class="empty-state"> <i class="fas fa-chart-line"></i> <p>Nenhum investimento</p> </div> `; return; } topInvestments.forEach(investment => { const item = document.createElement('div'); item.className = 'list-item touch-feedback'; item.dataset.id = investment.id; const currentValue = formatCurrency(investment.currentValue); const profit = investment.currentValue - investment.amount; const profitability = ((profit / investment.amount) * 100).toFixed(1); const isPositive = profit >= 0; item.innerHTML = ` <div class="item-info"> <h4>${investment.name}</h4> <p>${getInvestmentTypeName(investment.type)} • ${investment.quantity} un.</p> </div> <div> <div class="item-value" style="text-align: right;"> ${currentValue} </div> <div style="font-size: 14px; color: ${isPositive ? '#10b981' : '#ef4444'}; text-align: right;"> ${isPositive ? '+' : ''}${profitability}% </div> </div> `; item.addEventListener('click', () => { showInvestmentDetails(investment.id); }); container.appendChild(item); }); } function loadAllTransactions() { const container = document.getElementById('allTransactionsList'); const allTransactions = [...transactions] .sort((a, b) => new Date(b.date) - new Date(a.date)); container.innerHTML = ''; if (allTransactions.length === 0) { container.innerHTML = ` <div class="empty-state"> <i class="fas fa-exchange-alt"></i> <h3>Nenhuma transação</h3> <p>Adicione sua primeira transação</p> </div> `; return; } allTransactions.forEach(transaction => { const row = document.createElement('div'); row.className = 'table-row'; const amount = formatCurrency(transaction.amount); const date = new Date(transaction.date).toLocaleDateString('pt-BR'); const typeIcon = transaction.type === 'income' ? 'fa-arrow-up' : transaction.type === 'expense' ? 'fa-arrow-down' : 'fa-chart-line'; const typeClass = transaction.type === 'income' ? 'positive' : transaction.type === 'expense' ? 'negative' : ''; const typeColor = transaction.type === 'income' ? '#10b981' : transaction.type === 'expense' ? '#ef4444' : '#8b5cf6'; row.innerHTML = ` <div class="table-cell" style="display: flex; align-items: center; gap: 12px;"> <div style=" width: 40px; height: 40px; border-radius: 10px; background: ${typeColor}20; display: flex; align-items: center; justify-content: center; color: ${typeColor}; font-size: 18px; "> <i class="fas ${typeIcon}"></i> </div> <div> <div style="font-weight: 600; color: var(--text-primary);">${transaction.description}</div> <div style="font-size: 13px; color: var(--text-muted);">${date} • ${getCategoryName(transaction.category)}</div> </div> </div> <div class="table-cell" style="text-align: right;"> <div style="font-weight: 700; color: ${typeColor};">${amount}</div> <div class="action-buttons" style="margin-top: 8px; justify-content: flex-end;"> <button class="action-btn delete" onclick="confirmDeleteTransaction(${transaction.id})" style="width: 36px; height: 36px;"> <i class="fas fa-trash"></i> </button> </div> </div> `; container.appendChild(row); }); } function loadAllInvestments() { const container = document.getElementById('allInvestmentsList'); const allInvestments = [...investments] .sort((a, b) => b.currentValue - a.currentValue); container.innerHTML = ''; if (allInvestments.length === 0) { container.innerHTML = ` <div class="empty-state"> <i class="fas fa-chart-line"></i> <h3>Nenhum investimento</h3> <p>Adicione seu primeiro investimento</p> </div> `; return; } allInvestments.forEach(investment => { const row = document.createElement('div'); row.className = 'table-row'; const currentValue = formatCurrency(investment.currentValue); const investedValue = formatCurrency(investment.amount); const profit = investment.currentValue - investment.amount; const profitability = ((profit / investment.amount) * 100).toFixed(1); const isPositive = profit >= 0; const profitColor = isPositive ? '#10b981' : '#ef4444'; // Calcular dividendos totais const investmentDividends = dividends.filter(d => d.assetId === investment.id); const totalDividends = investmentDividends.reduce((sum, d) => sum + d.amount, 0); row.innerHTML = ` <div class="table-cell" style="display: flex; align-items: center; gap: 12px;"> <div style=" width: 40px; height: 40px; border-radius: 10px; background: rgba(139, 92, 246, 0.2); display: flex; align-items: center; justify-content: center; color: #8b5cf6; font-size: 18px; "> <i class="fas fa-chart-line"></i> </div> <div style="flex: 1;"> <div style="font-weight: 600; color: var(--text-primary);">${investment.name}</div> <div style="font-size: 13px; color: var(--text-muted);"> ${getInvestmentTypeName(investment.type)} • ${investment.quantity} un. </div> <div style="font-size: 12px; color: var(--text-muted); margin-top: 4px;"> Investido: ${investedValue} </div> </div> </div> <div class="table-cell" style="text-align: right;"> <div style="font-weight: 700; color: var(--text-primary);">${currentValue}</div> <div style="font-size: 14px; color: ${profitColor};"> ${isPositive ? '+' : ''}${profitability}% </div> ${totalDividends > 0 ? ` <div style="font-size: 12px; color: #06b6d4; margin-top: 4px;"> <i class="fas fa-donate"></i> ${formatCurrency(totalDividends)} </div> ` : ''} <div class="action-buttons" style="margin-top: 8px; justify-content: flex-end;"> <button class="action-btn" onclick="addDividendForInvestment(${investment.id})" style="width: 36px; height: 36px;"> <i class="fas fa-donate"></i> </button> <button class="action-btn delete" onclick="confirmDeleteInvestment(${investment.id})" style="width: 36px; height: 36px;"> <i class="fas fa-trash"></i> </button> </div> </div> `; container.appendChild(row); }); } function loadDividendsHistory() { const container = document.getElementById('dividendsHistory'); const allDividends = [...dividends] .sort((a, b) => new Date(b.date) - new Date(a.date)); container.innerHTML = ''; if (allDividends.length === 0) { container.innerHTML = ` <div class="empty-state"> <i class="fas fa-donate"></i> <h3>Nenhum dividendo</h3> <p>Registre seus primeiros dividendos</p> </div> `; return; } allDividends.forEach(dividend => { const row = document.createElement('div'); row.className = 'table-row'; const amount = formatCurrency(dividend.amount); const date = new Date(dividend.date).toLocaleDateString('pt-BR'); row.innerHTML = ` <div class="table-cell" style="display: flex; align-items: center; gap: 12px;"> <div style=" width: 40px; height: 40px; border-radius: 10px; background: rgba(6, 182, 212, 0.2); display: flex; align-items: center; justify-content: center; color: #06b6d4; font-size: 18px; "> <i class="fas fa-donate"></i> </div> <div> <div style="font-weight: 600; color: var(--text-primary);">${dividend.assetName}</div> <div style="font-size: 13px; color: var(--text-muted);">${date}</div> </div> </div> <div class="table-cell" style="text-align: right;"> <div style="font-weight: 700; color: #10b981;">${amount}</div> <div class="action-buttons" style="margin-top: 8px; justify-content: flex-end;"> <button class="action-btn delete" onclick="confirmDeleteDividend(${dividend.id})" style="width: 36px; height: 36px;"> <i class="fas fa-trash"></i> </button> </div> </div> `; container.appendChild(row); }); } function updateDividendsChart() { if (!currentCharts.dividends) return; const last6Months = getLastMonths(6); const dividendData = last6Months.map(month => { const monthDividends = dividends.filter(d => { const date = new Date(d.date); return date.getMonth() === month.month && date.getFullYear() === month.year; }).reduce((sum, d) => sum + d.amount, 0); return monthDividends; }); currentCharts.dividends.data.labels = last6Months.map(m => m.label); currentCharts.dividends.data.datasets[0].data = dividendData; currentCharts.dividends.update(); } function updateReportsCharts() { if (!currentCharts.wealth || !currentCharts.categories) return; // Atualizar gráfico de patrimônio const wealthData = calculateWealthHistory(); currentCharts.wealth.data.datasets[0].data = wealthData; currentCharts.wealth.update(); // Atualizar gráfico de categorias updateCategoriesChart(); } function updateCategoriesChart() { const categories = {}; const currentMonth = new Date().getMonth(); const currentYear = new Date().getFullYear(); transactions .filter(t => t.type === 'expense') .filter(t => { const date = new Date(t.date); return date.getMonth() === currentMonth && date.getFullYear() === currentYear; }) .forEach(transaction => { categories[transaction.category] = (categories[transaction.category] || 0) + transaction.amount; }); const labels = Object.keys(categories).map(cat => getCategoryName(cat)); const data = Object.values(categories); currentCharts.categories.data.labels = labels; currentCharts.categories.data.datasets[0].data = data; currentCharts.categories.update(); } function calculateWealthHistory() { const months = 4; const data = []; const today = new Date(); for (let i = months - 1; i >= 0; i--) { const date = new Date(today.getFullYear(), today.getMonth() - i, 1); const monthTransactions = transactions.filter(t => { const tDate = new Date(t.date); return tDate.getMonth() === date.getMonth() && tDate.getFullYear() === date.getFullYear(); }); const monthIncome = monthTransactions .filter(t => t.type === 'income') .reduce((sum, t) => sum + t.amount, 0); const monthExpenses = monthTransactions .filter(t => t.type === 'expense') .reduce((sum, t) => sum + t.amount, 0); const investmentValue = investments.reduce((sum, inv) => { return sum + inv.currentValue; }, 0); const wealth = monthIncome - monthExpenses + investmentValue; data.push(Math.max(0, wealth)); } return data; } // Funções de manipulação de dados function handleTransactionSubmit(e) { e.preventDefault(); const transaction = { id: Date.now(), date: document.getElementById('transactionDate').value, description: document.getElementById('transactionDescription').value, category: document.getElementById('transactionCategory').value, type: document.getElementById('transactionType').value, amount: parseFloat(document.getElementById('transactionAmount').value) }; transactions.push(transaction); saveData(); updateDashboard(); loadRecentTransactions(); if (currentPage === 'transactions') { loadAllTransactions(); } if (currentPage === 'reports') { updateReportsCharts(); } hideModal('transactionModal'); document.getElementById('transactionForm').reset(); showNotification('Transação adicionada com sucesso!'); } function handleInvestmentSubmit(e) { e.preventDefault(); const investment = { id: Date.now(), name: document.getElementById('investmentName').value, type: document.getElementById('investmentType').value, date: document.getElementById('investmentDate').value, amount: parseFloat(document.getElementById('investmentAmount').value), quantity: parseFloat(document.getElementById('investmentQuantity').value), currentValue: parseFloat(document.getElementById('investmentAmount').value), yield: 0 }; investments.push(investment); saveData(); updateDashboard(); loadInvestmentsList(); if (currentPage === 'investments') { loadAllInvestments(); } hideModal('investmentModal'); document.getElementById('investmentForm').reset(); showNotification('Investimento adicionado com sucesso!'); } function handleDividendSubmit(e) { e.preventDefault(); const assetId = parseInt(document.getElementById('dividendAsset').value); const asset = investments.find(i => i.id === assetId); if (!asset) { showNotification('Selecione um ativo válido', 'error'); return; } const dividend = { id: Date.now(), assetId: assetId, assetName: asset.name, amount: parseFloat(document.getElementById('dividendAmount').value), date: document.getElementById('dividendDate').value, type: 'dividend' }; dividends.push(dividend); // Atualizar valor do investimento asset.currentValue += dividend.amount; saveData(); updateDashboard(); if (currentPage === 'dividends') { loadDividendsHistory(); updateDividendsChart(); } if (currentPage === 'investments') { loadAllInvestments(); } hideModal('dividendModal'); document.getElementById('dividendForm').reset(); showNotification('Dividendo registrado com sucesso!'); } // Funções de exclusão window.confirmDeleteTransaction = function(id) { const transaction = transactions.find(t => t.id === id); if (!transaction) return; showDeleteModal( transaction.description, `Valor: ${formatCurrency(transaction.amount)}<br>Data: ${new Date(transaction.date).toLocaleDateString('pt-BR')}`, () => deleteTransaction(id) ); }; window.confirmDeleteInvestment = function(id) { const investment = investments.find(i => i.id === id); if (!investment) return; // Contar dividendos associados const dividendCount = dividends.filter(d => d.assetId === id).length; const dividendText = dividendCount > 0 ? `<br>${dividendCount} dividendo${dividendCount > 1 ? 's' : ''} associado${dividendCount > 1 ? 's' : ''}` : ''; showDeleteModal( investment.name, `Valor atual: ${formatCurrency(investment.currentValue)}${dividendText}`, () => deleteInvestment(id) ); }; window.confirmDeleteDividend = function(id) { const dividend = dividends.find(d => d.id === id); if (!dividend) return; showDeleteModal( `Dividendo - ${dividend.assetName}`, `Valor: ${formatCurrency(dividend.amount)}<br>Data: ${new Date(dividend.date).toLocaleDateString('pt-BR')}`, () => deleteDividend(id) ); }; function deleteTransaction(id) { transactions = transactions.filter(t => t.id !== id); saveData(); updateDashboard(); loadRecentTransactions(); if (currentPage === 'transactions') { loadAllTransactions(); } if (currentPage === 'reports') { updateReportsCharts(); } hideModal('deleteConfirmModal'); showNotification('Transação excluída com sucesso!'); } function deleteInvestment(id) { // Remove investimento investments = investments.filter(i => i.id !== id); // Remove dividendos associados dividends = dividends.filter(d => d.assetId !== id); saveData(); updateDashboard(); loadInvestmentsList(); if (currentPage === 'investments') { loadAllInvestments(); } if (currentPage === 'dividends') { loadDividendsHistory(); updateDividendsChart(); } hideModal('deleteConfirmModal'); showNotification('Investimento excluído com sucesso!'); } function deleteDividend(id) { const dividend = dividends.find(d => d.id === id); if (dividend) { // Atualizar valor do investimento const investment = investments.find(i => i.id === dividend.assetId); if (investment) { investment.currentValue -= dividend.amount; } } dividends = dividends.filter(d => d.id !== id); saveData(); updateDashboard(); if (currentPage === 'dividends') { loadDividendsHistory(); updateDividendsChart(); } if (currentPage === 'investments') { loadAllInvestments(); } hideModal('deleteConfirmModal'); showNotification('Dividendo excluído com sucesso!'); } // Funções auxiliares function showModal(modalId) { document.getElementById(modalId).style.display = 'flex'; } function hideModal(modalId) { document.getElementById(modalId).style.display = 'none'; } function showDeleteModal(title, details, onConfirm) { document.getElementById('deleteItemName').textContent = title; document.getElementById('deleteItemDetails').innerHTML = details; const confirmBtn = document.getElementById('confirmDelete'); const oldHandler = confirmBtn.onclick; confirmBtn.onclick = function() { onConfirm(); }; showModal('deleteConfirmModal'); } function showNotification(message, type = 'success') { const notification = document.getElementById('notification'); const messageEl = document.getElementById('notificationMessage'); const icon = notification.querySelector('i'); messageEl.textContent = message; notification.className = `notification ${type === 'success' ? '' : 'notification-error'}`; if (type === 'success') { icon.className = 'fas fa-check-circle'; } else { icon.className = 'fas fa-exclamation-circle'; } notification.classList.add('show'); setTimeout(() => { notification.classList.remove('show'); }, 3000); } function populateDividendAssets() { const select = document.getElementById('dividendAsset'); select.innerHTML = '<option value="">Selecione um ativo</option>'; investments.forEach(investment => { const option = document.createElement('option'); option.value = investment.id; option.textContent = `${investment.name} (${getInvestmentTypeName(investment.type)})`; select.appendChild(option); }); } window.addDividendForInvestment = function(investmentId) { showModal('dividendModal'); document.getElementById('dividendAsset').value = investmentId; }; function showMenu() { // Implementar menu lateral se necessário showNotification('Menu em desenvolvimento'); } function showTransactionDetails(id) { const transaction = transactions.find(t => t.id === id); if (transaction) { showNotification(`Detalhes: ${transaction.description} - ${formatCurrency(transaction.amount)}`); } } function showInvestmentDetails(id) { const investment = investments.find(i => i.id === id); if (investment) { const profit = investment.currentValue - investment.amount; const profitability = ((profit / investment.amount) * 100).toFixed(1); showNotification( `${investment.name}: ` + `Valor: ${formatCurrency(investment.currentValue)} ` + `(${profitability}%)` ); } } function formatCurrency(value) { return 'R$ ' + value.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }); } function getCategoryName(category) { const categories = { salary: 'Salário', freelance: 'Freelance', food: 'Alimentação', transport: 'Transporte', housing: 'Moradia', entertainment: 'Lazer', health: 'Saúde', education: 'Educação', other: 'Outros', investment: 'Investimento' }; return categories[category] || category; } function getInvestmentTypeName(type) { const types = { stock: 'Ação', fii: 'FII', bond: 'Renda Fixa', crypto: 'Criptomoeda', etf: 'ETF', fund: 'Fundo' }; return types[type] || type; } function getLastMonths(count) { const months = []; const now = new Date(); for (let i = count - 1; i >= 0; i--) { const date = new Date(now.getFullYear(), now.getMonth() - i, 1); months.push({ month: date.getMonth(), year: date.getFullYear(), label: date.toLocaleDateString('pt-BR', { month: 'short' }) }); } return months; } function saveData() { localStorage.setItem('finflow_mobile_transactions', JSON.stringify(transactions)); localStorage.setItem('finflow_mobile_investments', JSON.stringify(investments)); localStorage.setItem('finflow_mobile_dividends', JSON.stringify(dividends)); } // PWA Features if ('serviceWorker' in navigator) { window.addEventListener('load', function() { navigator.serviceWorker.register('/sw.js').catch(console.error); }); } // Prevent zoom on double tap let lastTouchEnd = 0; document.addEventListener('touchend', function(event) { const now = Date.now(); if (now - lastTouchEnd <= 300) { event.preventDefault(); } lastTouchEnd = now; }, false); // Install as PWA let deferredPrompt; window.addEventListener('beforeinstallprompt', (e) => { e.preventDefault(); deferredPrompt = e; // Mostrar botão de instalação após alguns segundos setTimeout(() => { if (deferredPrompt && confirm('Deseja instalar o FinFlow como aplicativo?')) { deferredPrompt.prompt(); deferredPrompt.userChoice.then(() => { deferredPrompt = null; }); } }, 5000); }); </script> <div class="modal-overlay" id="transactionModal" style="display:none;"><div class="modal-content"><div class="modal-header"><h3 class="modal-title"><i class="fas fa-exchange-alt"></i> Nova Transação</h3><button class="modal-close">&times;</button></div><div class="modal-body"><form id="transactionForm"><div class="form-group"><label class="form-label">Tipo da Transação</label><select id="transactionType" class="form-control" required><option value="income">Receita</option><option value="expense">Despesa</option><option value="investment">Investimento</option></select></div><div class="form-group"><label class="form-label">Descrição</label><input type="text" id="transactionDescription" class="form-control" placeholder="Ex: Salário, Mercado..." required></div><div class="form-group"><label class="form-label">Categoria</label><select id="transactionCategory" class="form-control"><option value="salary">Salário</option><option value="freelance">Freelance</option><option value="food">Alimentação</option><option value="transport">Transporte</option><option value="housing">Moradia</option><option value="health">Saúde</option><option value="entertainment">Lazer</option><option value="education">Educação</option><option value="other">Outros</option></select></div><div class="form-row"><div class="form-group"><label class="form-label">Valor</label><input type="number" id="transactionAmount" class="form-control" step="0.01" required></div><div class="form-group"><label class="form-label">Data</label><input type="date" id="transactionDate" class="form-control" required></div></div><button type="submit" class="btn btn-primary" style="width:100%; margin-top:10px;"><i class="fas fa-save"></i> Salvar Transação</button></form></div></div></div><div class="modal-overlay" id="investmentModal" style="display:none;"><div class="modal-content"><div class="modal-header"><h3 class="modal-title"><i class="fas fa-chart-line"></i> Novo Investimento</h3><button class="modal-close">&times;</button></div><div class="modal-body"><form id="investmentForm"><div class="form-group"><label class="form-label">Ativo</label><input type="text" id="investmentName" class="form-control" placeholder="Ex: PETR4" required></div><div class="form-group"><label class="form-label">Tipo</label><select id="investmentType" class="form-control"><option value="stock">Ação</option><option value="fii">FII</option><option value="bond">Renda Fixa</option><option value="crypto">Criptomoeda</option><option value="etf">ETF</option><option value="fund">Fundo</option></select></div><div class="form-row"><div class="form-group"><label class="form-label">Quantidade</label><input type="number" id="investmentQuantity" class="form-control" step="0.01" required></div><div class="form-group"><label class="form-label">Valor Total</label><input type="number" id="investmentAmount" class="form-control" step="0.01" required></div></div><div class="form-group"><label class="form-label">Data da Compra</label><input type="date" id="investmentDate" class="form-control" required></div><button type="submit" class="btn btn-primary" style="width:100%; margin-top:10px;"><i class="fas fa-save"></i> Salvar Investimento</button></form></div></div></div><div class="modal-overlay" id="dividendModal" style="display:none;"><div class="modal-content"><div class="modal-header"><h3 class="modal-title"><i class="fas fa-donate"></i> Novo Dividendo</h3><button class="modal-close">&times;</button></div><div class="modal-body"><form id="dividendForm"><div class="form-group"><label class="form-label">Ativo</label><select id="dividendAsset" class="form-control" required></select></div><div class="form-row"><div class="form-group"><label class="form-label">Valor Recebido</label><input type="number" id="dividendAmount" class="form-control" step="0.01" required></div><div class="form-group"><label class="form-label">Data</label><input type="date" id="dividendDate" class="form-control" required></div></div><button type="submit" class="btn btn-primary" style="width:100%; margin-top:10px;"><i class="fas fa-save"></i> Registrar Dividendo</button></form></div></div></div> <script>
// Modal helpers
function showModal(id){const el=document.getElementById(id); if(!el) return; el.style.display='flex'; document.body.style.overflow='hidden';}
function hideModal(el){ if(!el) return; el.style.display='none'; document.body.style.overflow=''; }
document.addEventListener('click', function(e){ if(e.target.classList.contains('modal-close')){ let modal = e.target.closest('.modal-overlay'); if(modal) hideModal(modal); }
});
document.addEventListener('click', function(e){ if(e.target.classList && e.target.classList.contains('modal-overlay')){ hideModal(e.target); }
}); // Populate dividend asset select from investments
function populateDividendAssets(){ const sel = document.getElementById('dividendAsset'); if(!sel) return; sel.innerHTML=''; let invs = JSON.parse(localStorage.getItem('finflow_mobile_investments')||'[]'); if(invs.length===0){ let opt=document.createElement('option'); opt.value=''; opt.text='-- Nenhum investimento --'; sel.appendChild(opt); return; } invs.forEach(i=>{ let opt=document.createElement('option'); opt.value=i.id; opt.text=i.name; sel.appendChild(opt); });
} // Basic form submit handlers (integrate with existing app logic)
document.getElementById('transactionForm')?.addEventListener('submit', function(e){ e.preventDefault(); const type = document.getElementById('transactionType').value; const desc = document.getElementById('transactionDescription').value; const cat = document.getElementById('transactionCategory').value; const amt = parseFloat(document.getElementById('transactionAmount').value)||0; const date = document.getElementById('transactionDate').value; let transactions = JSON.parse(localStorage.getItem('finflow_mobile_transactions')||'[]'); const id = Date.now(); transactions.push({id, date, description: desc, category: cat, type: type, amount: amt}); localStorage.setItem('finflow_mobile_transactions', JSON.stringify(transactions)); hideModal(document.getElementById('transactionModal')); if(window.updateDashboard) window.updateDashboard(); if(window.loadRecentTransactions) window.loadRecentTransactions(); if(window.loadAllTransactions) window.loadAllTransactions(); showTransient('Transação salva');
}); document.getElementById('investmentForm')?.addEventListener('submit', function(e){ e.preventDefault(); const name = document.getElementById('investmentName').value; const type = document.getElementById('investmentType').value; const qty = parseFloat(document.getElementById('investmentQuantity').value)||0; const amt = parseFloat(document.getElementById('investmentAmount').value)||0; const date = document.getElementById('investmentDate').value; let investments = JSON.parse(localStorage.getItem('finflow_mobile_investments')||'[]'); const id = Date.now(); investments.push({id, name, type, date, amount: amt, quantity: qty, currentValue: amt}); localStorage.setItem('finflow_mobile_investments', JSON.stringify(investments)); hideModal(document.getElementById('investmentModal')); if(window.loadInvestmentsList) window.loadInvestmentsList(); if(window.updateDashboard) window.updateDashboard(); showTransient('Investimento salvo');
}); document.getElementById('dividendForm')?.addEventListener('submit', function(e){ e.preventDefault(); const assetId = parseInt(document.getElementById('dividendAsset').value)||0; const amount = parseFloat(document.getElementById('dividendAmount').value)||0; const date = document.getElementById('dividendDate').value; let dividends = JSON.parse(localStorage.getItem('finflow_mobile_dividends')||'[]'); const id = Date.now(); let invs = JSON.parse(localStorage.getItem('finflow_mobile_investments')||'[]'); const asset = invs.find(i=>i.id==assetId); const assetName = asset?asset.name:'--'; dividends.push({id, assetId, assetName, amount, date, type:'dividend'}); localStorage.setItem('finflow_mobile_dividends', JSON.stringify(dividends)); hideModal(document.getElementById('dividendModal')); if(window.loadDividendsHistory) window.loadDividendsHistory(); showTransient('Dividendo registrado');
}); // Simple transient notification
function showTransient(msg){ const n = document.getElementById('notification'); if(!n) return alert(msg); document.getElementById('notificationMessage').textContent = msg; n.style.display = 'flex'; n.classList.add('show'); setTimeout(()=>{ n.classList.remove('show'); n.style.display='none'; }, 2200);
} // wire quick action buttons if present
document.getElementById('addIncomeBtn')?.addEventListener('click', ()=>{ showModal('transactionModal'); document.getElementById('transactionType').value='income'; document.getElementById('transactionDate').valueAsDate=new Date(); });
document.getElementById('addExpenseBtn')?.addEventListener('click', ()=>{ showModal('transactionModal'); document.getElementById('transactionType').value='expense'; document.getElementById('transactionDate').valueAsDate=new Date(); });
document.getElementById('addInvestmentBtn')?.addEventListener('click', ()=>{ showModal('investmentModal'); document.getElementById('investmentDate').valueAsDate=new Date(); });
document.getElementById('addDividendBtn')?.addEventListener('click', ()=>{ populateDividendAssets(); showModal('dividendModal'); document.getElementById('dividendDate').valueAsDate=new Date(); }); // close existing modal overlays on ESC
document.addEventListener('keydown', function(e){ if(e.key==='Escape'){ document.querySelectorAll('.modal-overlay').forEach(m=>m.style.display='none'); document.body.style.overflow=''; } });
</script> </body></html>